<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Europe FX Converter</title>
<style>
body{margin:0;font-family:-apple-system,system-ui;background:#eef;text-align:center}
#controls{padding:8px}
#word,#curr{padding:8px 10px;font-size:13px;border-radius:6px;border:1px solid #bbb}
#word{width:35%;max-width:180px}
#curr{margin-left:6px}
#go{padding:9px 12px;margin-left:8px;font-size:12px;border-radius:6px;border:0;background:#2b7cff;color:#fff;cursor:pointer}
#mapWrap{position:relative;width:95%;max-width:1100px;margin:12px auto}
#mapImg{width:100%;height:auto}
.pin{position:absolute;transform:translate(-50%,-50%);white-space:nowrap;display:flex;align-items:center;padding:3px 6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.12);pointer-events:none;color:#fff;font-weight:600}
.pin img{width:18px;height:12px;margin-right:5px;pointer-events:none}
#status{font-size:11px;color:#555;margin:5px}
/* Legend styling like original translations map */
/ #legend{position:fixed;top:10px;right:10px;background:rgba(255,255,255,0.9);padding:8px 12px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.25);font-size:13px;text-align:left}
/ #legend div{margin:2px 0;display:flex;align-items:center}
#legend{max-width:800px;margin:6px auto;font-size:12px}
.legend-box{width:14px;height:14px;margin-right:6px;border-radius:3px}
</style>
</head>
<body>

<div id="controls">
  <input id="word" placeholder="Amount" inputmode="decimal">
  <select id="curr">
    <option>EUR</option><option>USD</option><option>GBP</option><option>PLN</option><option>CHF</option><option>CZK</option>
    <option>SEK</option><option>NOK</option><option>DKK</option><option>HUF</option><option>RON</option><option>TRY</option>
    <option>ISK</option><option>UAH</option><option>BYN</option><option>RUB</option><option>BGN</option>
    <option>BAM</option><option>RSD</option><option>MKD</option><option>ALL</option>
  </select>
  <button id="go">Convert</button>
</div>

<div id="legend">
<strong>Language Families:</strong>
<span style="margin-left:8px;padding:3px 6px;border-radius:4px;background:#007bff">EURO Zone</span>
<span style="margin-left:6px;padding:3px 6px;border-radius:4px;background:#8a2be2">Nordic</span>
<span style="margin-left:6px;padding:3px 6px;border-radius:4px;background:#2ecc71">Central-Eastern</span>
<span style="margin-left:6px;padding:3px 6px;border-radius:4px;background:#ff9800">Balkan</span>
<span style="margin-left:6px;padding:3px 6px;border-radius:4px;background:#555">Non-EU</span>
<span style="margin-left:6px;padding:3px 6px;border-radius:4px;background:#e53935">Turkey</span>
</div>

<div id="mapWrap">
  <img id="mapImg" src="https://raw.githubusercontent.com/aceg-pl/tr/main/Europe.png">
</div>

<div id="status">Ready.</div>

<script>
const P=[
  {cc:'is',c:'ISK',x:13,y:21},{cc:'pt',c:'EUR',x:7,y:83},{cc:'es',c:'EUR',x:16,y:85},{cc:'fr',c:'EUR',x:27,y:69},
  {cc:'be',c:'EUR',x:30,y:62.5},{cc:'nl',c:'EUR',x:32,y:57},{cc:'ie',c:'EUR',x:15,y:51},{cc:'gb',c:'GBP',x:22,y:55},
  {cc:'dk',c:'DKK',x:36.5,y:48},{cc:'de',c:'EUR',x:37.5,y:60},{cc:'ch',c:'CHF',x:35,y:71},{cc:'at',c:'EUR',x:42,y:69},
  {cc:'it',c:'EUR',x:39.5,y:79.5},{cc:'se',c:'SEK',x:42.5,y:32},{cc:'no',c:'NOK',x:39.5,y:26},{cc:'fi',c:'EUR',x:54,y:27},
  {cc:'ee',c:'EUR',x:55.5,y:40},{cc:'lv',c:'EUR',x:55,y:44},{cc:'lt',c:'EUR',x:54,y:48.5},{cc:'by',c:'BYN',x:60,y:52},
  {cc:'ru',c:'RUB',x:74,y:42},{cc:'ua',c:'UAH',x:66,y:61},{cc:'pl',c:'PLN',x:49.5,y:57},{cc:'cz',c:'CZK',x:44,y:63},
  {cc:'sk',c:'EUR',x:52,y:66},{cc:'hu',c:'HUF',x:51,y:69.5},{cc:'si',c:'EUR',x:45,y:73},{cc:'hr',c:'EUR',x:45,y:76},
  {cc:'ba',c:'BAM',x:50,y:79},{cc:'rs',c:'RSD',x:54,y:74.5},{cc:'me',c:'EUR',x:52,y:80},{cc:'mk',c:'MKD',x:55,y:81.5},
  {cc:'al',c:'ALL',x:54,y:84},{cc:'bg',c:'BGN',x:61,y:78},{cc:'ro',c:'RON',x:59.5,y:70.5},{cc:'gr',c:'EUR',x:56,y:88},
  {cc:'tr',c:'TRY',x:79,y:81}
],
M=document.getElementById("mapWrap"),
I=document.getElementById("mapImg"),
S=document.getElementById("status"),
C={EUR:"#007bff",GBP:"#555",CHF:"#555",SEK:"#8a2be2",NOK:"#8a2be2",DKK:"#8a2be2",ISK:"#8a2be2",PLN:"#2ecc71",
   CZK:"#2ecc71",HUF:"#2ecc71",UAH:"#2ecc71",BYN:"#2ecc71",BGN:"#2ecc71",RON:"#2ecc71",MKD:"#2ecc71",
   RSD:"#ff9800",BAM:"#ff9800",ALL:"#ff9800",TRY:"#e53935",RUB:"#2ecc71"};

function F(c){return`https://flagcdn.com/24x18/${c}.png`}

function pin(r,p,v){
  let d=document.createElement("div");
  d.className="pin";
  d.style.left=p.x/100*r.width+"px";
  d.style.top=p.y/100*r.height+"px";
  d.style.background=C[p.c]||"#aaa"; // background fill
  d.innerHTML=`<img src="${F(p.cc)}"><span>${v}</span>`;
  M.appendChild(d);
}

function size(){
  let w=I.clientWidth,b=Math.max(10,Math.round(w/60));
  M.querySelectorAll(".pin").forEach(p=>p.style.fontSize=b+"px");
}

async function go(){
  document.querySelectorAll(".pin").forEach(n=>n.remove());
  let a=parseFloat(document.getElementById("word").value.replace(",","."));
  if(isNaN(a)) return;
  let base=document.getElementById("curr").value;
  S.textContent="Fetching rates...";
  try{
    let r=await fetch(`https://v6.exchangerate-api.com/v6/5a7dbc89f90b6086282f3d9c/latest/${base}`),
        j=await r.json(),
        R=I.getBoundingClientRect();
    P.forEach(p=>{
      let x=j.conversion_rates[p.c];
      if(x){
        let v=(a*x).toFixed(2)+" "+p.c;
        pin(R,p,v);
      }
    });
    size();
    S.textContent="Done.";
  }catch(e){S.textContent="Error fetching rates."}
}

document.getElementById("go").onclick=go;
window.onresize=()=>setTimeout(size,150);
I.onload=size;
</script>
</body>
</html>
